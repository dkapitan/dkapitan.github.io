<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Daniel Kapitan">
<meta name="author" content="Egge van der Poel">
<meta name="author" content="Antoinette Vlieger">
<meta name="description" content="Veel mensen denken ‘als data over mij gaan, dan zijn het automatisch persoonsgegevens die beschermd moeten worden’. Data zijn geen eigendom, maar een gemeengoed. Gezondheidsdata gaan over de patiënt, maar zijn niet van de patiënt. Samen met Antoinette Vlieger en Egge van der Poel pleit ik voor datasolidariteit als concept waarmee bewuste afwegingen gemaakt worden tussen collectieve en individuele belangen, tussen de huidige privacy en de gezondheidszorg van generaties na ons.">

<title>Dr Daniel Kapitan | Data-centric AI | Applied AI | Coaching &amp; Mentoring | Masterclasses &amp; Public Speaking - Een vals dilemma: privacy versus datasolidariteit</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-3N2FL85753"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-3N2FL85753', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-md " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../images/logo-dr-daniel-kapitan.png" alt="" class="navbar-logo">
    </a>
  </div>
        <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Een vals dilemma: privacy versus datasolidariteit</li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
        <div class="sidebar-tools-main tools-wide">
    <a href="https://www.linkedin.com/in/dkapitan/" title="LinkedIn profile" class="quarto-navigation-tool px-1" aria-label="LinkedIn profile"><i class="bi bi-linkedin"></i></a>
    <a href="https://github.com/dkapitan" title="GitHub profile" class="quarto-navigation-tool px-1" aria-label="GitHub profile"><i class="bi bi-github"></i></a>
    <a href="https://kapitan.net/blog/index.xml" title="RSS feed" class="quarto-navigation-tool px-1" aria-label="RSS feed"><i class="bi bi-rss"></i></a>
    <div id="quarto-search" class="quarto-navigation-tool px-1" title="Search"></div>
</div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../projects/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Projects</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../projects/pharmaccess.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PharmAccess</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../projects/mytomorrows.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">MyTomorrows</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../projects/roetz-life.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Roetz Life</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../projects/blue-radix.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Blue Radix</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../projects/amphia.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Amphia Sensium</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../projects/has.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">HAS Green Academy</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../projects/sensire.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sensire</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../blog/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Blog</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../appointment/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Book an appointment</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content column-page-right" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Een vals dilemma: privacy versus datasolidariteit</h1>
<p class="subtitle lead">Artikel gepubliceerd in iBestuur</p>
  <div class="quarto-categories">
    <div class="quarto-category">nederlands</div>
    <div class="quarto-category">datasolidariteit</div>
    <div class="quarto-category">data solidarity</div>
  </div>
  </div>

<div>
  <div class="description">
    <p>Veel mensen denken ‘als data over mij gaan, dan zijn het automatisch persoonsgegevens die beschermd moeten worden’. Data zijn geen eigendom, maar een gemeengoed. Gezondheidsdata gaan over de patiënt, maar zijn niet van de patiënt. Samen met Antoinette Vlieger en Egge van der Poel pleit ik voor datasolidariteit als concept waarmee bewuste afwegingen gemaakt worden tussen collectieve en individuele belangen, tussen de huidige privacy en de gezondheidszorg van generaties na ons.</p>
  </div>
</div>


<div class="quarto-title-meta column-page-right">

    <div>
    <div class="quarto-title-meta-heading">Authors</div>
    <div class="quarto-title-meta-contents">
             <p>Daniel Kapitan </p>
             <p>Egge van der Poel </p>
             <p>Antoinette Vlieger </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">Jan 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="data-zijn-een-gemeengoed" class="level2">
<h2 class="anchored" data-anchor-id="data-zijn-een-gemeengoed">Data zijn een gemeengoed</h2>
<p>Wie een pleidooi schrijft voor datasolidariteit, kan rekenen op forse kritiek. Recentelijk hebben twee van ons een bijdrage geleverd aan een stuk in het <a href="https://fd.nl/samenleving/1499700/gezondheidsdata-zijn-een-goudmijn-zijn-we-al-klaar-om-die-te-ontginnen">FD met de titel “gezondheidsdata zijn een goudmijn”</a>. Op diverse plekken werd geïnsinueerd dat een financiële goudmijn bedoeld werd, terwijl het stuk overduidelijk doelde op de kennis goudmijn. Professor Barbara Prainsack pleitte onlangs op <a href="https://ibestuur.nl/artikel/een-nieuw-perspectief-op-datasolidariteit/">iBestuur voor datasolidariteit</a>. Een positieve ontwikkeling, want privacy domineert als zogenaamde tegenpool nog altijd het publieke debat. Maar ten aanzien van privacy zijn veel belangrijke aspecten onbekend: de huidige en aankomende Europese wetgeving, de stand van zaken qua beschermende technologieën, en de nuances in het ethische debat ten aanzien van maatschappelijke waarde versus commerciële waarde.</p>
<p>Vrijwel niemand weet hoe radicaal het Europees data-recht inmiddels is. Data moeten vaak verplicht beschikbaar gesteld worden voor hergebruik, winsten hierop zijn veelal niet toegestaan, en als het om persoonsgegeven gaat, blijft de privacy geborgd. Data zijn namelijk geen eigendom, maar een gemeengoed. Gezondheidsdata gaan over de patiënt, maar zijn niet van de patiënt. Ook andere partijen hebben vrijwel nooit een vermogensrecht op data. Binnen de Europese wetgeving bestaat hooguit het databankrecht: als iemand risicodragend investeert in een bepaalde set data, met het doel om met die set de investering terug te verdienen, uitsluitend dan ontstaat er een databankrecht. Bij gezondheidsdata is hier vrijwel nooit sprake van: de meeste data ontstaan als bijproduct in het zorgproces. Er is dus niet risicodragend geïnvesteerd in die dataset. Europa heeft zo – expres – de mogelijkheid tot vermogensrechten op gezondheidsgegevens vrijwel uitgesloten. Die data worden namelijk -terecht- beschouwd als een goed dat toekomt aan de gemeenschap; een bien commun. Vanuit die gedachte werkt de EU aan het verplicht maken van het delen van zorgdata (onder strikte voorwaarden uiteraard). Al sinds 2003 zijn allerlei wetten en instrumenten gemaakt om (bredere) datarechten aan burgers te geven, wat onder andere heeft geleid tot de Wet Hergebruik Overheidsinformatie (vergelijkbaar met de Wet Open Overheid). Als binnenkort de European Health Data Space (EHDS) een feit is, dan zal iedere wat grotere zorgverlener verplicht zijn om data beschikbaar te maken voor wetenschap, beleidsonderzoek en onderwijs, maar ook voor het ontwikkelen van nuttige gezondheidsproducten.</p>
</section>
<section id="privacy-en-het-mozaïek-effect" class="level2">
<h2 class="anchored" data-anchor-id="privacy-en-het-mozaïek-effect">Privacy en het mozaïek-effect</h2>
<p>Een veelgehoord argument tegen (verdere) ontsluiting van gezondheidsdata, is dat de privacy van de betreffende patiënten ‘in de toekomst’ in het geding kan komen. Door nu nog onvoorziene combinaties van databronnen kunnen pseudonieme data opeens niet meer veilig blijken. Dit is een variant op het mozaïek effect: het risico dat persoonlijke of gevoelige informatie over iemand wordt onthuld, door het combineren van verschillende gegevensbronnen.</p>
<blockquote class="blockquote">
<p>Technologie is niet zaligmakend, maar het privacyvraagstuk is nu juist iets waar technologie ons verder kan helpen.</p>
</blockquote>
<p>Deze hypothetische privacy-schendingen duiken in allerlei vormen op tijdens discussies over de (on)wenselijkheid van verdergaand datagebruik, vaak nadat alle zwaarwegende bezwaren zijn besproken. Gaan we de gegevens versleutelen, hanteren we een centrale of een gedistribueerde aanpak voor de analyse, is het mogelijk om met geanonimiseerde of gepseudonimiseerde data te werken: dergelijke afwegingen worden veelal in een vroege fase van het project besproken. Wanneer er eindelijk ruimte is voor de volgende stap, dan is er altijd wel een verstokte ‘voorvechter van privacy’ die betoogt dat het nu dan wel goed geregeld kan zijn, maar “wat als deze dataset in de toekomst wordt gekoppeld aan een andere dataset?” Het mozaïek-effect als laatste retorische redmiddel.</p>
</section>
<section id="privacy-en-technologie" class="level2">
<h2 class="anchored" data-anchor-id="privacy-en-technologie">Privacy en technologie</h2>
<p>Technologie is niet zaligmakend, maar het privacyvraagstuk is nu juist iets waar technologie ons verder kan helpen. Met de komst van privacy-enhancing technologieën (PETs) kan men op een decentrale, federatieve manier data met elkaar delen terwijl het risico op herleidbaarheid tot een minimum is teruggebracht. Een <a href="https://coe-dsc.nl/whitepaper-on-the-benefits-of-privacy-enhancing-technologies-pets/">recente studie van de Data Sharing Coalition</a> geeft aan wat deze technieken zijn en hoe deze gebruikt kunnen worden. Simpel gezegd komt het erop neer dat we encryptietechnieken, zoals we gewend zijn om te gebruiken voor bijvoorbeeld websites, ook kunnen inzetten om berekeningen te maken op encrypted data. Een alledaagse analogie: u bent met 30 man op een verjaardag en benieuwd wat het hoogst genoten salaris is. Met behulp van PETs kan een dergelijke berekening worden uitgevoerd, waarbij geen van uw feestgenoten publiekelijk hoeft vrij te geven hoeveel hij of zij verdient. Door data niet te kopiëren en onder encryptie berekeningen uit te voeren, is de kans op herleidbaarheid minimaal.</p>
</section>
<section id="avg-en-pseudonimisering-nederlandse-strengheid" class="level2">
<h2 class="anchored" data-anchor-id="avg-en-pseudonimisering-nederlandse-strengheid">AVG en pseudonimisering: Nederlandse strengheid</h2>
<p>De AVG krijgt vaak de schuld van het feit dat data niet kunnen worden gedeeld, maar deze wet is uitsluitend van toepassing als de ontvanger kan achterhalen over wie de data gaan, en de privacy dus in het geding is. Om te bepalen of een natuurlijke persoon identificeerbaar is, moet rekening worden gehouden met alle middelen “waarvan redelijkerwijs valt te verwachten dat zij worden gebruikt.” Als een ontvanger van gepseudonimiseerde data de sleutel niet heeft, zal hier veelal niet aan zijn voldaan, en is de AVG dus niet van toepassing, omdat niemands privacy in het geding is.</p>
<blockquote class="blockquote">
<p>Datasolidariteit als concept beoogt om betere, bewuste afwegingen te maken tussen collectieve en individuele belangen, tussen de huidige privacy en de gezondheidszorg van generaties na ons.</p>
</blockquote>
<p>De Nederlandse AP neemt ten aanzien hiervan een strenger standpunt in; juist omdat bestanden eventueel ooit gekoppeld kunnen worden, zijn pseudonieme gegevens wat de AP betreft eigenlijk altijd toch gewoon persoonsgegevens. Elke theoretische mogelijkheid wordt dus meegewogen, niet elke mogelijkheid waarvan redelijkerwijs te verwachten is dat deze zal worden gebruikt. Deze interpretatie heeft eraan bijgedragen, dat een groot deel van de bevolking een zeer strenge positie inneemt: als data over mij gaan, dan zijn het automatisch persoonsgegevens die beschermd moeten worden, denkt men, terwijl het dan uitsluitend een toekomstige, theoretische mogelijkheid betreft. Wellicht ooit… denkt men. Punt is, als wellicht ooit de privacy inderdaad in het geding komt omdat door het mozaïek-effect bestanden herleidbaar worden, dan moet men gaan voldoen aan de zeer strenge eisen van de AVG, maar niet eerder dan dat.</p>
</section>
<section id="datasolidariteit-als-leidend-ethisch-principe" class="level2">
<h2 class="anchored" data-anchor-id="datasolidariteit-als-leidend-ethisch-principe">Datasolidariteit als leidend ethisch principe</h2>
<p>Het maatschappelijke debat over het delen van gezondheidsdata roept veel emoties en tegenstellingen op. Datasolidariteit als concept beoogt om betere, bewuste afwegingen te maken tussen collectieve en individuele belangen, tussen de huidige privacy en de gezondheidszorg van generaties na ons. De potentiële waarde creatie staat centraal; het doel dat men ermee beoogt te bereiken, en dus niet of de data-vrager bijvoorbeeld een (semi)publieke organisatie is. Er zijn massa’s private organisaties die maatschappelijk nut beogen, dus hen op deze grond passeren zonder ons te verdiepen in de vraag wat in een concreet geval met data wordt beoogd, zou discriminatie zijn. Bovendien wordt geld verdienen aan data steeds moeilijker gemaakt; ook in de (concept) EHDS staat dat bij het aanvragen van data veelal ten hoogste de marginale kosten in rekening mogen worden gebracht. Gezondheidsgegevens zijn immers een publiek goed, dat aan de gemeenschap ten goede moet komen. De datastromen moeten daarom net als fietspaden gefinancierd worden uit de grote pot. Het ongemak en onbehagen waarmee het debat over data delen in de zorg wordt gevoerd, terwijl de relevante wetgeving eigenlijk heel degelijk in elkaar steekt, geeft aan dat we ons samen moeten verdiepen in de juistheid van onze afwegingskaders. Het is niet a of b, de zaken liggen subtieler. Datasolidariteit als ethisch principe is wellicht een tegenhanger van de op het mozaïek-effect hamerende privacy-dogmatici, maar juist een partner van privacy-realisten. Want ook data-solidairen menen dat state of the art ICT moet worden ingezet om het vereiste vertrouwen te creëren, zodat gezondheidsdata kunnen worden ingezet voor publieke meerwaarde zonder iemand te schaden.</p>
<blockquote class="blockquote">
<p>Datasolidariteit gaat erom dat het verschil wordt gezien tussen een reëel privacy risico en een wat ongemakkelijk gevoel over een theoretische mogelijkheid.</p>
</blockquote>
</section>
<section id="geen-onderzoek-doen-met-data-is-nu-juist-onethisch" class="level2">
<h2 class="anchored" data-anchor-id="geen-onderzoek-doen-met-data-is-nu-juist-onethisch">Geen onderzoek doen met data is nu juist onethisch</h2>
<p>Want is het alternatief? Dat we geen onderzoek doen met de schat aan medische gegevens die dagelijks in het zorgverleningsproces ontstaan? Dan gaat er allerlei kennis verloren. Zonder data kunnen er geen kwaliteitscontroles verricht worden, kunnen farmaceuten niet voldoen aan hun wettelijke plicht om te controleren of er op langere termijn niet toch bijwerkingen optreden. En als toestemming altijd de eis is, wordt big data onderzoek onmogelijk. Is het gebruik van medische data onethisch? Wij denken dat het andersom is. Artsen beloven niet te schaden en deze belofte beperkt zich niet tot de huidige patiënten. Wat wij bedoelen met datasolidariteit is dus dit: een subtielere blik op privacy vraagstukken, in het belang van toekomstige patiënten. Datasolidariteit gaat erom dat het verschil wordt gezien tussen een reëel privacy risico en een wat ongemakkelijk gevoel over een theoretische mogelijkheid. Het voelt inderdaad niet zo prettig, als data die zijn verzameld terwijl je op een kwetsbaar moment bij een dokter zat, worden gebruikt voor onderzoek. Maar we moeten leren dat dit gevoel over het algemeen geen reële privacy risico’s oplevert. Dit, terwijl het nalaten van onderzoek de volgende generatie wel degelijk reële risico’s oplevert; het risico dat we bepaalde toekomstige patiënten niet kunnen helpen, wat met (solidair) dataonderzoek wel had gekund.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p><br> Copyright © 2023 Daniel Kapitan<br> This website was created with <a href="https://quarto.org"><img src="../images/quarto.png" class="img-fluid" alt="Quarto" width="65"></a></p>
</div>   
    <div class="nav-footer-center">
<p><br> <strong>Postal address:</strong><br> DWMM Holding B.V.<br> Marie Baronstraat 15<br> 3056 AA ROTTERDAM</p>
</div>
    <div class="nav-footer-right">
<p><br> <strong>Chamber of Commerce (KvK):</strong> 52920259<br> <strong>RSIN:</strong> 850665851<br> <strong>IBAN:</strong> NL47 KNAB 0259 5268 27<br> <strong>Terms &amp; Conditions</strong> in <a href="../resources/230901-algemene-voorwaarden.pdf">Dutch</a><br></p>
</div>
  </div>
</footer>




</body></html>